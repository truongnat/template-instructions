# GitHub Integration Tools

Tools for syncing and managing GitHub repositories with the TeamLifecycle workflow.

**Purpose:** Support both `bin/` CLI and `.agent/` workflows with GitHub integration.

## Overview

This directory contains scripts for integrating GitHub with the Agentic SDLC system, enabling automated issue tracking, milestone management, and repository synchronization.

## Scripts

### `sync_github.py`
**Purpose:** Sync TeamLifecycle artifacts with GitHub issues and milestones

**Features:**
- Create GitHub issues from sprint tasks
- Sync milestones with sprint numbers
- Apply labels based on role/priority
- Link artifacts to issues
- Track progress

**Usage:**
```bash
python tools/github/sync_github.py
python tools/github/sync_github.py --sprint 3
python tools/github/sync_github.py --dry-run
```

**Options:**
- `--sprint N` - Sync specific sprint
- `--dry-run` - Preview without creating issues
- `--force` - Overwrite existing issues
- `--labels` - Apply custom labels

## Configuration

### Environment Variables

Add to `.env` file:
```bash
# GitHub Configuration
GITHUB_TOKEN=ghp_your_personal_access_token
GITHUB_REPO=username/repository
GITHUB_ORG=organization_name  # Optional
```

### GitHub Token Permissions

Required scopes:
- ‚úÖ `repo` - Full repository access
- ‚úÖ `write:issues` - Create and update issues
- ‚úÖ `write:milestones` - Create and update milestones

Create token at: https://github.com/settings/tokens

## Features

### Issue Creation

Automatically creates GitHub issues from:
- Sprint tasks
- Bug reports
- Feature requests
- Architecture decisions

**Issue Format:**
```markdown
# [ROLE] Task Title

**Sprint:** sprint-3
**Priority:** high
**Category:** feature

## Description
Task description from artifact

## Acceptance Criteria
- [ ] Criterion 1
- [ ] Criterion 2

## Related Artifacts
- docs/sprints/sprint-3/plans/Project-Plan-v1.md
- docs/sprints/sprint-3/designs/Architecture-Design.md

---
*Auto-generated by Agentic SDLC*
```

### Milestone Management

- Creates milestones for each sprint
- Sets due dates based on sprint timeline
- Tracks completion percentage
- Links issues to milestones

### Label System

**Role Labels:**
- `role:pm` - Project Manager tasks
- `role:dev` - Developer tasks
- `role:qa` - QA tasks
- `role:devops` - DevOps tasks

**Priority Labels:**
- `priority:critical` - Critical issues
- `priority:high` - High priority
- `priority:medium` - Medium priority
- `priority:low` - Low priority

**Type Labels:**
- `type:bug` - Bug fixes
- `type:feature` - New features
- `type:architecture` - Architecture work
- `type:security` - Security issues

**Status Labels:**
- `status:planning` - In planning
- `status:in-progress` - In progress
- `status:review` - In review
- `status:done` - Completed

## Workflow Integration

### Automatic Sync

Add to workflow files:

```yaml
# .agent/workflows/pm.md
## Step 5: Sync to GitHub
```bash
python tools/github/sync_github.py --sprint {sprint_number}
```
```

### Manual Sync

```bash
# Sync current sprint
python tools/github/sync_github.py

# Sync specific sprint
python tools/github/sync_github.py --sprint 3

# Preview changes
python tools/github/sync_github.py --dry-run
```

## Examples

### Example 1: Sync Sprint 3

```bash
$ python tools/github/sync_github.py --sprint 3

üîÑ Syncing Sprint 3 to GitHub...

üìã Creating milestone: Sprint 3
‚úÖ Milestone created: Sprint 3 (due: 2026-01-15)

üìù Creating issues:
  ‚úÖ Issue #42: [PM] Create project plan
  ‚úÖ Issue #43: [DEV] Implement authentication
  ‚úÖ Issue #44: [QA] Test login flow

üè∑Ô∏è  Applying labels:
  ‚úÖ role:pm, priority:high, type:planning
  ‚úÖ role:dev, priority:high, type:feature
  ‚úÖ role:qa, priority:medium, type:testing

‚úÖ Sync completed!
   Milestone: Sprint 3
   Issues: 3 created
   Labels: 9 applied
```

### Example 2: Dry Run

```bash
$ python tools/github/sync_github.py --dry-run

üîç DRY RUN - No changes will be made

üìã Would create milestone: Sprint 3
üìù Would create issues:
  ‚Ä¢ [PM] Create project plan
  ‚Ä¢ [DEV] Implement authentication
  ‚Ä¢ [QA] Test login flow

üè∑Ô∏è  Would apply labels:
  ‚Ä¢ role:pm, priority:high, type:planning
  ‚Ä¢ role:dev, priority:high, type:feature
  ‚Ä¢ role:qa, priority:medium, type:testing

‚ÑπÔ∏è  Run without --dry-run to apply changes
```

## Dependencies

```bash
pip install PyGithub python-dotenv
```

Or install from requirements:
```bash
pip install -r tools/requirements.txt
```

## Error Handling

### Authentication Errors
```bash
‚ùå GitHub authentication failed
Solution: Check GITHUB_TOKEN in .env
```

### Permission Errors
```bash
‚ùå Insufficient permissions
Solution: Ensure token has 'repo' and 'write:issues' scopes
```

### Rate Limiting
```bash
‚ö†Ô∏è  GitHub API rate limit exceeded
Solution: Wait or use authenticated token for higher limits
```

## Advanced Usage

### Custom Labels

```python
# In sync_github.py
CUSTOM_LABELS = {
    'role:custom': '#FF5733',
    'priority:urgent': '#FF0000',
}
```

### Issue Templates

Create custom templates:
```python
def create_issue_body(task):
    return f"""
# {task['title']}

**Custom Field:** {task['custom']}

## Description
{task['description']}
"""
```

### Webhook Integration

Setup webhooks to trigger syncs:
```python
# webhook_handler.py
@app.route('/webhook', methods=['POST'])
def handle_webhook():
    # Trigger sync on push
    subprocess.run(['python', 'tools/github/sync_github.py'])
```

## Troubleshooting

### Issues Not Created
1. Check GitHub token permissions
2. Verify repository access
3. Check API rate limits
4. Review error logs

### Labels Not Applied
1. Ensure labels exist in repository
2. Check label names match exactly
3. Verify token has write permissions

### Milestones Not Created
1. Check milestone permissions
2. Verify due dates are valid
3. Ensure milestone doesn't already exist

## Best Practices

1. **Always test with --dry-run first**
2. **Use meaningful issue titles**
3. **Link artifacts in issue descriptions**
4. **Apply consistent labels**
5. **Set realistic due dates**
6. **Close issues when tasks complete**

## Integration with Other Tools

### Neo4j
Link GitHub issues to knowledge graph:
```python
# In sync_github.py
def link_to_neo4j(issue_id, kb_entry):
    # Create relationship in Neo4j
    pass
```

### Research Agent
Reference GitHub issues in research:
```python
# In research_agent.py
def search_github_issues(term):
    # Search related issues
    pass
```

## Future Enhancements

- [ ] Bi-directional sync (GitHub ‚Üí Artifacts)
- [ ] Pull request integration
- [ ] Code review automation
- [ ] CI/CD integration
- [ ] Slack/Discord notifications
- [ ] Project board automation

## Related Documentation

- **GitHub API:** https://docs.github.com/en/rest
- **PyGithub:** https://pygithub.readthedocs.io/
- **Workflow Guide:** `../../.agent/workflows/README.md`

---

**Version:** 1.0.0  
**Created:** 2026-01-02  
**Dependencies:** PyGithub, python-dotenv
