graph TD
    %% Actors
    User([User])
    
    %% Brain Layer
    Brain[Brain Meta-Controller]
    Judge[Judge]
    Learner[Learner]
    
    %% Workflows
    Cycle[/cycle]
    Explore[/explore]
    Emergency[/emergency]
    Sprint[/sprint]
    Metrics[/metrics]
    
    %% Roles
    PM[Project Manager]
    BA[Business Analyst]
    SA[System Analyst]
    UIUX[UI/UX Designer]
    PO[Product Owner]
    QA[Tester]
    SecA[Security Analyst]
    Dev[Developer]
    DevOps[DevOps]
    Reporter[Reporter]
    Stakeholder[Stakeholder]
    
    %% Main Flow
    User -->|Directives| Brain
    Brain -->|Route| Cycle
    Brain -->|Route| Explore
    Brain -->|Route| Emergency
    Brain -->|Route| Sprint
    
    %% Sprint Flow
    Sprint -->|Start| PM
    PM -->|Plan| BA
    BA -->|Reqs| SA
    BA -->|Reqs| UIUX
    BA -->|Reqs| PO
    
    PO -->|Backlog| SA
    PO -->|Backlog| UIUX
    
    SA -->|Design| QA
    UIUX -->|Design| QA
    
    QA -->|Verify| SecA
    SecA -->|Verify| Dev
    
    Dev -->|Code| DevOps
    DevOps -->|Deploy| Tester[Tester/QA]
    
    Tester -->|Pass| Reporter
    Tester -->|Fail| Dev
    
    Reporter -->|Report| Stakeholder
    Stakeholder -->|Approve| Brain
    Stakeholder -->|Reject| PM
    
    %% Sub-flows
    Cycle -->|Task| Dev
    Explore -->|Analysis| PM
    Emergency -->|Hotfix| Dev
    
    %% Feedback Loops
    Brain -->|Score| Judge
    Judge -->|Feedback| Brain
    Brain -->|Learn| Learner
    Learner -->|Update| Brain
    
    %% Next Steps (Explicit)
    PM -.->|Next| SA
    SA -.->|Next| QA
    QA -.->|Next| Dev
    Dev -.->|Next| Tester
    Tester -.->|Next| Reporter
    Reporter -.->|Next| Stakeholder
    Stakeholder -.->|Next| Brain
